language: go
go:
  - "1.11.x"

sudo: enabled

install: 
  - nvm install node
  - sudo dpkg --add-architecture i386
  - wget -nc https://dl.winehq.org/wine-builds/Release.key
  - sudo apt-key add Release.key
  - sudo apt-add-repository 'deb https://dl.winehq.org/wine-builds/ubuntu/ trusty main'
  - sudo apt-get update
  - sudo apt-get install --install-recommends winehq-stable


script:
  - cd example/ui && npm run test
  - make install-builder
  - gotron-builder -g example -l --ia32
  - cd example && gotron-builder
  - gotron-builder -g example -a example/ui/build -w
  - gotron-builder -g example --out example -w --ia32